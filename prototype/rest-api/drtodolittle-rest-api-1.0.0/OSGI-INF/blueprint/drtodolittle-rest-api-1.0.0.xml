<?xml version="1.0" encoding="UTF-8"?><blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
 
 <!-- to setup camel servlet with OSGi HttpService -->
  <reference id="httpService" interface="org.osgi.service.http.HttpService"/>

  <bean class="org.apache.camel.component.servlet.osgi.OsgiServletRegisterer" destroy-method="unregister" init-method="register">
    <property name="alias" value="/rest-api"/>
    <property name="httpService" ref="httpService"/>
    <property name="servlet" ref="camelServlet"/>
  </bean>

	
	<!-- Default Resource Mapping -->
	<service id="defaultResourceService" interface="org.ops4j.pax.web.extender.whiteboard.ResourceMapping">
		<bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultResourceMapping">
			<property name="alias" value="/"/>
			<property name="path" value=""/>
		</bean>	
	</service>
  
  <service id="welcomeFileService" interface="org.ops4j.pax.web.extender.whiteboard.WelcomeFileMapping">
	  <bean class="org.ops4j.pax.web.extender.whiteboard.runtime.DefaultWelcomeFileMapping">
			<property name="redirect" value="true"/>
			<property name="welcomeFiles">
			  <array>
				<value>index.html</value>
				<value>welcome.html</value>
			  </array>
			</property>
		</bean>
	</service>
 
  
  <bean class="org.apache.camel.component.servlet.CamelHttpTransportServlet" id="camelServlet"/>

 
    <camelContext xmlns="http://camel.apache.org/schema/blueprint">
		<restConfiguration bindingMode="json" component="servlet" contextPath="/rest-api" port="8181"/>	  

		<rest path="/say">
		<get uri="/hello">
		  <to uri="direct:hello"/>
		</get>
		<get consumes="application/json" uri="/bye">
		  <to uri="direct:bye"/>
		</get>
		<post uri="/bye">
		  <to uri="mock:update"/>
		</post>
	  </rest>
	  <route>
		<from uri="direct:hello"/>
		<transform>
		  <constant>Hello World</constant>
		</transform>
	  </route>
	  <route>
		<from uri="direct:bye"/>
		<transform>
		  <constant>Bye World</constant>
		</transform>
	  </route>
		
    </camelContext>
 
</blueprint>